from pyrogram import Client, filters
from pyrogram.types import InlineKeyboardMarkup, InlineKeyboardButton

# ===== Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ø¬Ø¨Ø§Ø±ÛŒ (ÙÙ‚Ø· Ø§ÛŒÙ† Ø¯Ùˆ ØªØ§ Ø±Ùˆ Ø®ÙˆØ¯Øª Ù…ÛŒâ€ŒØ³Ø§Ø²ÛŒ) =====
API_ID = 12345678
API_HASH = "abcdef123456abcdef123456abcdef12"
# =======================================================

BOT_TOKEN = "6807172542:AAFCf53hZbohmDQJlB2EcTAZqlp4kdkUXZI"

CHANNEL_USERNAME = "@Fanta_Movies"
CHANNEL_LINK = "https://t.me/Fanta_Movies"

app = Client(
    "FantaMoviesBot",
    api_id=API_ID,
    api_hash=API_HASH,
    bot_token=BOT_TOKEN
)

def join_btn():
    return InlineKeyboardMarkup([
        [InlineKeyboardButton("ğŸ“¢ Ø¹Ø¶ÙˆÛŒØª Ø¯Ø± Ú©Ø§Ù†Ø§Ù„", url=CHANNEL_LINK)]
    ])

@app.on_message(filters.private & filters.command("start"))
async def start(client, message):
    try:
        await client.get_chat_member(CHANNEL_USERNAME, message.from_user.id)
    except:
        await message.reply(
            "âŒ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø±Ø¨Ø§Øª Ø¨Ø§ÛŒØ¯ Ø¹Ø¶Ùˆ Ú©Ø§Ù†Ø§Ù„ Ø¨Ø§Ø´ÛŒØ¯",
            reply_markup=join_btn()
        )
        return

    await message.reply("ğŸ¬ Ø³Ù„Ø§Ù… Ø¹Ø²ÛŒØ²Ù…\nØ§Ø³Ù… ÙÛŒÙ„Ù… Ø±Ùˆ Ø¨ÙØ±Ø³Øª ğŸ˜")

@app.on_message(filters.private & filters.text)
async def search_movie(client, message):
    try:
        await client.get_chat_member(CHANNEL_USERNAME, message.from_user.id)
    except:
        await message.reply(
            "âŒ Ø§ÙˆÙ„ Ø¹Ø¶Ùˆ Ú©Ø§Ù†Ø§Ù„ Ø´Ùˆ",
            reply_markup=join_btn()
        )
        return

    query = message.text
    found = False

    async for msg in client.search_messages(CHANNEL_USERNAME, query, limit=10):
        if msg.video or msg.document:
            found = True
            await msg.copy(message.chat.id)

    if not found:
        await message.reply("ğŸ˜• ÙÛŒÙ„Ù…ÛŒ Ø¨Ø§ Ø§ÛŒÙ† Ø§Ø³Ù… Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯")
